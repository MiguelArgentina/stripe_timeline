<li id="<%= dom_id(t) %>"
    class="list-group-item d-flex justify-content-between align-items-start list-group-item-action">
  <div class="me-3">
    <div class="fw-semibold">
      <%= link_to t.transaction_key,
                  transaction_path(key: t.transaction_key),
                  data: { turbo_frame: "details" },
                  class: "link-underline link-underline-opacity-0 mono" %>
    </div>

    <div class="small text-muted">
      <% if t.last_event_at_unix %>
        <time title="<%= Time.at(t.last_event_at_unix) %>">
          — <%= time_ago_in_words(Time.at(t.last_event_at_unix)) %> ago
        </time>
      <% end %>
      <% if t.last4.present? %> — •••• <%= t.last4 %><% end %>
      <% if t.email.present? %> — <%= t.email %><% end %>
      <% if t.order_id.present? %> — order <%= t.order_id %><% end %>
    </div>
  </div>

  <div class="text-end">
    <div class="d-flex gap-2 align-items-center justify-content-end">
      <% if t.amount_integer && t.currency %>
        <span class="badge text-bg-secondary">
          <%= money_cents(t.amount_integer, t.currency) %>
        </span>
      <% end %>

      <% if t.status %>
        <%= status_chip(t.status, bootstrap: true) %>
      <% end %>
    </div>

    <div class="mt-2 d-flex gap-2 justify-content-end">
      <%= link_to "view", transaction_path(key: t.transaction_key),
                  data: { turbo_frame: "details" }, class: "btn btn-sm btn-outline-secondary" %>
      <%= link_to "full page", transaction_path(key: t.transaction_key),
                  data: { turbo_frame: "_top" }, class: "btn btn-sm btn-outline-secondary" %>
    </div>
  </div>
</li>
